<!-- dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BlakeOL Dashboard</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.socket.io/4.5.1/socket.io.min.js"></script>
</head>
<body>
  <!-- Navigation bar -->
  <nav class="container">
    <h2>Welcome, <span id="username-display"></span>!</h2>
    <button id="logout-button">Logout</button>
  </nav>

  <!-- 'contacts' div -->
  <div id="contacts" class="container">
    <h3>Contacts</h3>

    <!-- Status selector dropdown for changing user status -->
    <div id="status-selector">
      <label for="status">Status: </label>
      <select id="status" onchange="updateStatus(this.value)">
        <option value="Online">Online</option>
        <option value="Away">Away</option>
        <option value="Do Not Disturb">Do Not Disturb</option>
      </select>
    </div>

    <!-- Add the search field for finding contacts -->
    <div id="search-contacts" class="container">
      <h3>Search for Contacts</h3>
      <input type="text" id="search-input" placeholder="Search by username or email">
      <ul id="search-results"></ul> 
    </div>

    <ul id="contacts-list"></ul>
    <button id="start-chat-button">Start Chat</button>
  </div>

  <!-- 'chat' div -->
  <div id="chat" class="chat-window" style="display:none;">
    <div id="messages"></div>
    <input type="text" id="message" placeholder="Type a message..." oninput="sendTypingNotification()">
    <button id="send-message-button">Send</button>
    <div id="typing" style="color: grey; font-size: 0.8em;"></div>
    <audio id="message_sent_sound" src="./assets/sounds/mail_sent.mp3" preload="auto"></audio>
    <audio id="message_receive_sound" src="./assets/sounds/aol_message_received_one.mp3" preload="auto"></audio>
  </div>

  <!-- Audio element for dashboard startup sound -->
  <audio id="dashboard_startup_sound" src="./assets/sounds/windows_95_startup.mp3" preload="auto"></audio>

  <script src="app.js"></script>
  <script>
    // Play dashboard startup sound on first user interaction
    document.addEventListener('DOMContentLoaded', function () {
      function playDashboardStartupSound() {
        const dashboardSound = document.getElementById('dashboard_startup_sound');
        dashboardSound.play().catch(function(error) {
          console.log('Autoplay prevented:', error);
        });
        document.removeEventListener('click', playDashboardStartupSound);
      }
      document.addEventListener('click', playDashboardStartupSound, { once: true });
    });
  </script>
</body>
</html>
